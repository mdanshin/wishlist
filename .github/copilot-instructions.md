# Wishlist AI Guide
- **Коммуникация**: Отвечай пользователю строго на русском языке, включая ошибки и предупреждения.
- **Запуск**: `npm install` выполняется один раз, затем `npm start` поднимает `live-server .`; модульные импорты Firebase ломаются при открытии `index.html` напрямую.
- **Архитектура**: `index.html` — единственная страница, подключающая `src/app.js` как ES-модуль и `src/styles.css` с query-параметром версии.
- **DOM-идентификаторы**: Не переименовывай существующие ID — `src/app.js` кэширует элементы в верхней части файла и полагается на их стабильность.
- **Состояние UI**: `onAuthStateChanged` управляет видимостью секций через `element.style.display`; новые сценарии входа/выхода добавляй сюда вместо ручного обнуления DOM.
- **Аутентификация**: `signInWithPopup(auth, provider)` и другие методы импортируются из CDN Firebase 9.22.2; расширяя функциональность, бери API с той же версии и CDN.
- **Firestore**: Пользовательские данные лежат по пути `users/{uid}` (создаём при первом входе), списки желаний — в `users/{uid}/wishlist` с полями `{ text, createdAt }`. При добавлении полей обновляй и запись (`setDoc`/`addDoc`), и чтение в `loadWishlist`.
- **Формат дат**: Все временные метки формируются через `new Date().toISOString()`; меняй формат только согласованно при записи и отображении.
- **Отрисовка списка**: `loadWishlist` очищает `<ul>` и строит элементы заново; придерживайся этого подхода, чтобы не рассинхронизировать состояние.
- **Обработка ошибок**: По соглашению ошибки выводятся через `console.error` и `alert(...)` с русскими текстами, а успешные действия проходят без всплывающих сообщений.
- **Выход**: Кнопка `logout` использует единственный `signOut(auth)`; дополнительный teardown внедряй в текущую ветку `onAuthStateChanged`.
- **Firebase config**: `src/firebase.js` уже инициализирует приложение через CDN `initializeApp`; не добавляй дублирующие вызовы и напоминай разработчику заменить демо-конфиг на боевой.
- **Версионирование**: `npm version <level>` запускает `scripts/sync-version.mjs`, который обновляет query-параметры в `index.html` и экспорт `APP_VERSION` в `src/version.js`; элемент с ID `app-version` отображает текущую версию.
- **Зависимости**: Локальный сервер обеспечивает `live-server`; пакет `firebase` в `package.json` оставлен для совместимости, но реальный SDK тянется из CDN.
- **Развертывание**: GitHub Pages обслуживает только статические файлы, поэтому используй относительные пути и избегай серверных API или переменных окружения.
- **Тестирование**: Автотестов нет — проверяй изменения вручную после `npm start`, авторизуясь через Google и прогоняя ключевые сценарии (логин, добавление элементов, логаут).
